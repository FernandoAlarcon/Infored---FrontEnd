<div>
   <nav aria-label="breadcrumb" style="background-color: white;">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a routerLink="/home-index">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Citas</li>
      </ol>
   </nav>
   <div class="row" *ngIf="Acciones.length != 0" > 
            <div class="col-md-12 row">
                <div class="col-md-2"></div>
                <div class="col-md-8">
                   <ul class="nav nav-tabs md-tabs" id="myTab" role="tablist">
                      <ng-container *ngFor=" let Accion of Acciones "> 
                         <li *ngIf="Accion.status == true"  class="nav-item pointer" role="presentation">
                            <a class = "nav-link" 
                                    id    = "home-tab" 
                                    data-bs-toggle = "tab"  
                                    data-toggle="tab"
                                    [attr.data-target] = " '#'+ Accion.id "
                                    [attr.data-bs-target] = " '#'+ Accion.id "
                                    type  = "button"
                                    role  = "tab"  
                                    aria-selected="true"> {{Accion.accion}}
                            </a>
                            <div class="slide"></div>
                         </li>
                      </ng-container>             
                       
                    </ul>
                </div>
                <div class="col-md-12 row">
                    <div class="col-md-1"></div>
                    <div class="col-md-10">
                        <div class="tab-content" id="myTabContent"><br><br><br>
                            
                            <ng-container *ngFor=" let Accion of Acciones "> 

                                    <div *ngIf="Accion.accion == 'Crear'      && Accion.status == true " class="tab-pane fade show active" id={{Accion.id}} role="tabpanel" aria-labelledby="home-tab">
                                        <div style="text-align: center;" >
                                            <h3>
                                                Nueva Cita 
                                            </h3>
                                            <hr>
                                         </div>
                                         <div class="row">
                                          
                                              <div class="col-md-12 row">
                                                 <div class="col-md-12">
                                                    <h4>
                                                       Fechas
                                                    </h4><br>
                                                 </div>
                                                 <div class="col-md-4">
                                                    <p>
                                                       Fecha Inicial
                                                    </p>
                                                    <input type="datetime-local" [(ngModel)]="SelectedData.fecha_inicio" class="form-control" id="start" name="trip-start" value={{myDateToday}} min="2001-01-01" max={{myDateToday}} >
                                                 </div>
                                                 <div class="col-md-4">
                                                    <p>
                                                       Fecha Final
                                                    </p>
                                                    <input type="datetime-local" [(ngModel)]="SelectedData.fecha_fin" class="form-control" id="start" name="trip-start" value={{myDateToday}} min="2001-01-01" max={{myDateToday}} >
                                                 </div>
                                              </div>
                                              <div class="col-md-12 row">
                                                 <div class="col-md-12"><br>
                                                    <hr>
                                                    <h4>
                                                       Personal
                                                    </h4><br>
                                                 </div>
                                                 <div class="col-md-12 row">
                                                    <div class="col-md-4">
                                                       <p>Tecnicos</p>
                                                       <div class="">
                                                          <select [(ngModel)]="SelectedData.tecnico_id" class="form-control" id="">
                                                             <option selected *ngFor="let Tecnico of Tecnicos" value={{Tecnico.user_id}} > 
                                                                   {{ Tecnico.nombre }}  {{ Tecnico.apellidos }} 
                                                             </option>
                                                          </select>
                                                         </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                       <p>Medicos</p>
                                                       <div class="">
                                                             <select [(ngModel)]="SelectedData.medico_id" class="form-control" id="">
                                                                <option selected *ngFor="let Medico of Medicos" value={{Medico.user_id}} >  {{ Medico.nombre }}  {{ Medico.apellidos }} </option>
                                                             </select>

                                                       </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                       <p>Pacientes</p>
                                                        <div>
                                                            <select [(ngModel)]="SelectedData.paciente_id" class="form-control" id="">
                                                                <option selected *ngFor="let Paciente of Pacientes" value={{Paciente.user_id}} > 
                                                                   {{ Paciente.nombre }}  {{ Paciente.apellidos }} 
                                                                </option>
                                                            </select> 
                                                       </div>
                                                    </div> 
                                                 </div>
                                              </div>
                                              <div class="col-md-12 row">
                                                 <div class="col-md-12"><br>
                                                    <hr>
                                                    <h4>
                                                       Informacion Examen
                                                    </h4><br>
                                                 </div>
                                                 <div class="col-md-12 row">
                                                    <div class="col-md-4">
                                                       <p>Tipo de Examen</p>
                                                       <select name="" [(ngModel)]="SelectedData.id_tipo_examen" class="form-control" id="" >
                                                         <option *ngFor="let Examen of ListExamenes" value={{Examen.id}} selected >
                                                            {{Examen.nombre}} 
                                                         </option>  
                                                       </select>
                                                    </div>
                                                    <div class="col-md-4">
                                                       <p>Clinica</p>
                                                       <select name="" [(ngModel)]="SelectedData.id_clinica" class="form-control" id="" >
                                                          <option *ngFor="let Clinica of Clinicas" value={{Clinica.id_clinica}} selected >
                                                             {{Clinica.NombreClinica}} <i style="color: gray;" > ({{Clinica.Ciudad}}) </i>
                                                          </option>
                                                       </select>
                                                    </div>
                                                    <div class="col-md-4">
                                                       <p>Costo Examen <label style="color: gray;" > - ({{SelectedData.costo_examen | currency}}) </label> </p>
                                                       <input class="form-control" [(ngModel)]="SelectedData.costo_examen" type="number" placeholder="Eje. $9999999" >
                                                    </div>
                   
                                                 </div>
                                                 <div class="col-md-12 row">
                                                    <div class="col-md-3"><br><br>
                                                        <button class="btn btn-success" (click)="CrearCitas()" id="upload_book">Crear Cita</button>
                                                    </div>
                                                 </div> 
                                                 
                                              </div>
                                           
                                        </div> 
                                    </div>
                                    <div *ngIf="Accion.accion == 'Listar'     && Accion.status == true " class="tab-pane fade " id={{Accion.id}} role="tabpanel" aria-labelledby="home-tab">
                                        <div>
                                            <app-calendario [id_usuario]="UserProfile?.id" [roll]="RollData[0].Roll" ></app-calendario>
                                            <br><br><br><br><br>
                                        </div>
                                    </div>
                                    <div *ngIf="Accion.accion == 'Eliminar'   && Accion.status == true " class="tab-pane fade " id={{Accion.id}} role="tabpanel" aria-labelledby="home-tab">
                                       <div class="col-md-12 row" style="text-align: center;" >
                                          <div class="col-md-4"></div>
                                          <div class="col-md-4">
                                             <input type="text" class="form-control"  [(ngModel)]="SearchDelete" (ngModelChange)="ListEliminar()" placeholder="Busca tu cita ..."  ><br><br>
                                          </div>
                                          <div class="col-md-4"></div>
                                       </div>
                                       <div class="col-md-12">
                                          <div class="card">
                                             <div class="card-header">
                                                   Citas para Eliminar <br>                                       
                                             </div>
                                             <div class="card-block">
                                                <div class="dt-responsive table-responsive">
            
                                                <table id="TablaEliminar" class="table table-striped table-bordered nowrap">
                                                <thead>
                                                      <tr>
                                                      <th scope="col">Paciente </th>
                                                      <th scope="col">Medico   </th>
                                                      <th scope="col">Tecnico  </th>
                                                      <th scope="col">Examen   </th>
                                                      <th scope="col">Clinica  </th>
                                                      <th scope="col">Estado   </th>
                                                      </tr>
                                                   </thead>
                                                   <tbody>
                                                      <tr *ngFor="let Cita of AllCitas" >
                                                         <th scope="row"> {{ Cita.paciente }} </th>
                                                         <td> {{ Cita.medico  }} </td>
                                                         <td> {{ Cita.tecnico }} </td>
                                                         <td> {{ Cita.examen  }} </td>
                                                         <td> {{ Cita.clinica }} </td>
                                                         <td> {{ Cita.estado }} </td>
                                                         <td>
                                                            <button class="btn btn-danger btn-circle btn-lg" title="Buscar Cliente" (click)="DeleteCita(Cita)" >
                                                               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                                  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                                                                  <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                                                               </svg>
                                                         </button>
                                                         </td>
                                                      </tr>
                                                   </tbody>
                                                   <tfoot>
                                                      <tr>
                                                         <th scope="col">Paciente </th>
                                                         <th scope="col">Medico   </th>
                                                         <th scope="col">Tecnico  </th>
                                                         <th scope="col">Examen   </th>
                                                         <th scope="col">Clinica  </th>
                                                         <th scope="col">Estado   </th>
                                                      </tr>
                                                   </tfoot>
                                                </table>

                                                </div>
                                             </div>
                                          </div>
                                          <br><br><br>
                                          <div class="pagination-box row" style=" width: 100%;" >
                                    
                                             <div class="col-md-4" style="text-align: center;" >
                                                <svg *ngIf='pagination1.current_page > 1' (click)="changePage1(pagination1.current_page - 1)"  width="25" height="25" fill="currentColor" 
                                                   class="pointer bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
                                                   <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>
                                                </svg>
                                                <!-- <svg *ngIf='pagination1.length == 0' style="color: grey;" width="25" height="25" fill="currentColor" class="pointer bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
                                                   <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>
                                                </svg> -->
                                             </div>
                                             <div class="col-md-4" style="text-align: center;" >                                                
                                                <div>
                                                      Page {{ pagination1.current_page }} <br>
                                                      <p style=" color: grey; " >
                                                         Total {{ pagination1.last_page }}
                                                      </p>
                                                </div>
                                             </div>
                                             <div class="col-md-4" style="text-align: center;" >
                                                <svg *ngIf='pagination1.current_page < pagination1.last_page' (click)="changePage1(pagination1.current_page + 1)" width="25" height="25" fill="currentColor" 
                                                   class="pointer bi bi-arrow-right-circle-fill" viewBox="0 0 16 16">
                                                   <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
                                                </svg>
                                             </div>

                                          </div>
                                       </div>
                                    </div>
                                    <div *ngIf="Accion.accion == 'Actualizar' && Accion.status == true " class="tab-pane fade " id={{Accion.id}} role="tabpanel" aria-labelledby="home-tab">
                                       <div class="col-md-12 row" style="text-align: center;" >
                                          <div class="col-md-4"></div>
                                          <div class="col-md-4">
                                             <input type="text" class="form-control"  [(ngModel)]="SearchUpdate" (ngModelChange)="ListUpdate()" placeholder="Busca tu cita ..."  ><br><br>
                                          </div>
                                          <div class="col-md-4"></div>
                                       </div>
                                       <div class="col-md-12">
                                          <div class="card">
                                             <div class="card-header">
                                                  Actualizar Estado <br>                                       
                                             </div>
                                             <div class="card-block">
                                                <div class="dt-responsive table-responsive">
            
                                                <table id="TablaActualizar" class="table table-striped table-bordered nowrap">
                                                   <thead>
                                                      <tr>
                                                         <th scope="col">Acciones     </th>
                                                         <th scope="col">Estado       </th>

                                                         <th scope="col">Paciente     </th>
                                                         <!-- <th scope="col">Doc Paciente </th> -->
                                                         <!-- <th scope="col">Email        </th> -->
                                                         <th scope="col">Medico       </th>
                                                         <th scope="col">Tecnico      </th>
                                                         <th scope="col">Examen       </th>
                                                         <th scope="col">Clinica      </th>
                                                      </tr>
                                                   </thead>
                                                   <tbody>
                                                      <tr *ngFor="let Cita of AllCitasUpdate" >
                                                         <td>
                                                            <!-- <button *ngIf=" Cita.estado == " class="btn btn-circle btn-lg" style='background-color: #979595'  title="Programar" (click)="UpdateCita(Cita, '1')" >
                                                               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-terminal-plus" viewBox="0 0 16 16">
                                                                  <path fill-rule="evenodd" d="M2 3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h5.5a.5.5 0 0 1 0 1H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v4a.5.5 0 0 1-1 0V4a1 1 0 0 0-1-1H2Zm1.146 2.146a.5.5 0 0 1 .708 0L5.177 6.47a.75.75 0 0 1 0 1.06L3.854 8.854a.5.5 0 1 1-.708-.708L4.293 7 3.146 5.854a.5.5 0 0 1 0-.708ZM5.5 9a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5ZM16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Zm-3.5-2a.5.5 0 0 1 .5.5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 .5-.5Z"/>
                                                               </svg>
                                                         </button> -->
                                                            <button *ngIf=" Cita.id_estado == 1 " class="btn btn-circle btn-lg" style='background-color: #01AA04'  title="Confirmar" (click)="UpdateCita(Cita, '2')" >
                                                               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-check-fill" viewBox="0 0 16 16">
                                                                  <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zm8.854-9.646a.5.5 0 0 0-.708-.708L7.5 7.793 6.354 6.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
                                                               </svg>
                                                            </button>
                                                            <button *ngIf=" Cita.id_estado == 2 " class="btn btn-circle btn-lg" style='background-color: #EBEF09'  title="Diagnosticado" (click)="UpdateCita(Cita, '3')" >
                                                               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-text" viewBox="0 0 16 16">
                                                                  <path d="M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"/>
                                                                  <path d="M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/>
                                                               </svg>
                                                            </button>
                                                            <button *ngIf=" Cita.id_estado == 3 " class="btn btn-circle btn-lg" style='background-color: #31C6B6'  title="Finalizado" (click)="UpdateCita(Cita, '4')" >
                                                               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder-check" viewBox="0 0 16 16">
                                                                  <path d="m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"/>
                                                                  <path d="M15.854 10.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.707 0l-1.5-1.5a.5.5 0 0 1 .707-.708l1.146 1.147 2.646-2.647a.5.5 0 0 1 .708 0z"/>
                                                               </svg>
                                                            </button>
                                                            <button class="btn btn-circle btn-lg" style='background-color: #FB3737'  title="Cancelar" (click)="UpdateCita(Cita, '5')" >
                                                               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-x" viewBox="0 0 16 16">
                                                                  <path fill-rule="evenodd" d="M6.146 7.146a.5.5 0 0 1 .708 0L8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 0 1 0-.708z"/>
                                                                  <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                                                                  <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                                                               </svg>
                                                            </button>
                                                         </td>
                                                         <td> {{ Cita.estado }} </td>
                                                         <th scope="row"> {{ Cita.paciente }} </th> 
                                                         <!-- <td> 
                                                            <a href="mailto:Cita.correo?Subject=Hola%20 Cita.paciente %20te%20hablamos%20de%20Infored%20">
                                                               {{ Cita.correo  }}
                                                            </a> 
                                                            {{ Cita.correo  }}
                                                         </td> -->

                                                         <td> {{ Cita.medico  }} </td>
                                                         <td> {{ Cita.tecnico }} </td>
                                                         <td> {{ Cita.examen  }} </td>
                                                         <td> {{ Cita.clinica }} </td>
                                                        
                                                      </tr>
                                                   </tbody>
                                                   <tfoot>
                                                      <tr>
                                                         <th scope="col">Acciones     </th>
                                                         <th scope="col">Estado       </th>
                                                         
                                                         <th scope="col">Paciente     </th>
                                                         <!-- <th scope="col">Doc Paciente </th> -->
                                                         <!-- <th scope="col">Email        </th> -->
                                                         <th scope="col">Medico       </th>
                                                         <th scope="col">Tecnico      </th>
                                                         <th scope="col">Examen       </th>
                                                         <th scope="col">Clinica      </th>
                                                      </tr>
                                                   </tfoot>
                                                </table>

                                                </div>
                                             </div>
                                          </div>
                                          <br><br><br>
                                          <div class="pagination-box row"  > 
                                     
                                             <div class="col-md-4" style="text-align: center;"  >
                                                <svg *ngIf='pagination2.current_page > 1' (click)="changePage2(pagination2.current_page - 1)"  width="25" height="25" fill="currentColor" class="pointer bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
                                                   <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>
                                                </svg>
                                                 <svg *ngIf='AllCitasUpdate.length == 0' style="color: grey;" width="25" height="25" fill="currentColor" class="pointer bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
                                                   <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>
                                                </svg>  
                                             </div>
                                             <div class="col-md-4" style="text-align: center;" >
                                                
                                               <div>
                                                   Page {{ pagination2.current_page }} <br>
                                                   <p style=" color: grey; " >
                                                      Total {{ pagination2.last_page }}
                                                   </p>
                                               </div>
            
                                             </div>
                                             <div class="col-md-4" style="text-align: center;"  >
                                               <svg *ngIf='pagination2.current_page < pagination2.last_page' (click)="changePage2(pagination2.current_page + 1)" width="25" height="25" fill="currentColor" 
                                                      class="pointer bi bi-arrow-right-circle-fill" viewBox="0 0 16 16">
                                                 <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
                                               </svg>
                                             </div>
                                             
                                          </div>
                                       </div>
                                    </div> 

                            </ng-container>             

                        </div>
                    </div>
                    <div class="col-md-1"></div>
                </div>
            </div> 
    </div>
</div>